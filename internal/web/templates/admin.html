<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>gomac1910</title>
<style>
body { font-family: monospace; background: #f0f0f0; color: #000; }
h1 { font-size: 24px; margin-bottom: 20px; }
.switch-box { padding: 10px; margin-bottom: 20px; background: #fff; border: 2px solid #000; }
.switch-title { font-weight: bold; margin-bottom: 5px; cursor: pointer; }
.port { 
  width: 30px; 
  height: 30px; 
  text-align: center; 
  line-height: 30px; 
  border: 1px solid #000; 
  cursor: pointer; 
  font-size: 12px; 
  text-decoration: none; 
  color: #000; 
  box-sizing: border-box;
}
.port.up { background: #0f0; }
.port.down { background: #f00; }
.port-details { display: none; margin-top: 5px; padding: 5px; border-top: 1px solid #000; background: #eee; }
table { border-collapse: collapse; margin-top: 5px; width: 100%; }
th, td { border: 1px solid #000; padding: 4px 8px; text-align: left; }
.up-text { color: green; font-weight: bold; }
.down-text { color: red; font-weight: bold; }

/* switch panel */
.port-panel {
  display: inline-block;
  margin-bottom: 8px;
}

.port-row {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  justify-content: flex-start;
  max-width: min(100%, calc(30px * 28 + 4px * 28)); /* dynamically scale up to ~56 ports */
}

.menu-bar {
  background: #ddd;
  padding: 5px 10px;
  margin-bottom: 10px;
}

.menu-bar a {
  margin-right: 15px;
  text-decoration: none;
  color: #000;
  font-weight: bold;
}
.menu-bar a:hover {
  text-decoration: underline;
}
</style>
<script>
function togglePortDetail(switchId, portIndex) {
  const divId = 'port-detail-' + switchId + '-' + portIndex;
  const div = document.getElementById(divId);
  if (div.style.display === 'none' || div.style.display === '') {
    div.style.display = 'block';
  } else {
    div.style.display = 'none';
  }
}
</script>
</head>
<body>
<h1>gomac1910</h1>

<div class="menu-bar">
  <a href="/">Dashboard</a>
  <a href="/mac">MAC Search</a>
  <a href="/admin">Manage Switches</a>
</div>

<br>

<!-- Add Switch Form -->
<form action="/admin/add" method="POST" class="switch-box">
  <h2 class="switch-title">Add Switch</h2>
  <label>Name: <input type="text" name="name" required></label><br>
  <label>IP Address: <input type="text" name="ip" required></label><br>
  <label>Community: <input type="text" name="community" value="public"></label><br>
  <label>System Type:
    <select name="system">
      <option value="generic">Generic</option>
      <option value="unifi">UniFi</option>
    </select>
  </label><br>
  <button class="add-btn" type="submit">Add Switch</button>
</form>

<div class="switch-box">
      <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>IP Address</th>
        <th>Community</th>
        <th>System Type</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {{range .Switches}}
      <tr>
        <td>{{.Name}}</td>
        <td>{{.IPAddress}}</td>
        <td>{{.Community}}</td>
        <td>{{.System}}</td>
        <td>
          <form action="/admin/delete/{{.ID}}" method="POST" onsubmit="return confirm('Delete this switch?');">
            <button>Delete</button>
          </form>
        </td>
      </tr>
      {{else}}
      <tr><td colspan="4">No switches configured</td></tr>
      {{end}}
    </tbody>
</div>
</body>
</html>